<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
        body{
            background-color: black;
            color: wheat;
        }
    </style>
  </head>
  <body>
    0 UNSENT Client has been created. open() not called yet. 1 OPENED open() has
    been called. 2 HEADERS_RECEIVED send() has been called, and headers and
    status are available. 3 LOADING Downloading; responseText holds partial
    data. 4 DONE The operation is complete.
  </body>
  <script>
    const requestUrl = 'https://api.github.com/users/hiteshchoudhary'
    const xhr = new XMLHttpRequest();
    xhr.open('GET', requestUrl)
    xhr.onreadystatechange = function(){
        console.log(xhr.readyState);
        if (xhr.readyState === 4) {
            const data = JSON.parse(this.responseText)
            console.log(typeof data);
            console.log(data.followers);
        }
    }
    xhr.send();

    //************************************************************Notes for Fetch API()****************************************************************
    // 📌 What is Fetch API?
// The Fetch API is used to make HTTP requests (like GET, POST, etc.) to servers.
// It's built into modern browsers and returns a Promise.


// ✅ Basic GET Request using Fetch
// fetch('https://jsonplaceholder.typicode.com/posts/1')
//   .then(response => response.json()) // Convert response to JSON
//   .then(data => console.log(data))   // Handle the data
//   .catch(error => console.error('Error:', error)); // Handle errors


// // ✅ Fetch with async/await (cleaner syntax)
// async function fetchPost() {
//   try {
//     const response = await fetch('https://jsonplaceholder.typicode.com/posts/1');

//     // Always good to check if the response was successful
//     if (!response.ok) {
//       throw new Error('Network response was not ok');
//     }

//     const data = await response.json();
//     console.log(data);
//   } catch (error) {
//     console.error('Error fetching post:', error);
//   }
// }

// fetchPost();


// // ✅ Making a POST Request (sending data to server)
// async function createPost() {
//   try {
//     const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
//       method: 'POST', // HTTP method
//       headers: {
//         'Content-Type': 'application/json'
//       },
//       body: JSON.stringify({
//         title: 'New Post',
//         body: 'This is a test post.',
//         userId: 1
//       })
//     });

//     const result = await response.json();
//     console.log('Post created:', result);
//   } catch (error) {
//     console.error('Error creating post:', error);
//   }
// }


// 🧠 Notes:
// - fetch() returns a Promise.
// - Use .then()/.catch() or async/await to handle the response.
// - Always check response.ok before using the data.
// - Use headers and JSON.stringify() when sending data.
// - wrap fetch in try/catch when using async/await to handle errors safely.


// 🔁 Common HTTP Methods:
// GET     → Retrieve data
// POST    → Send data (create new resource)
// PUT     → Update entire resource
// PATCH   → Update part of resource
// DELETE  → Remove data


    // async function fetchData() {
    //   try {
    //     let response = await fetch(
    //       "https://api.github.com/users/hiteshchoudhary"
    //     ); // Fetch API data
    //     let data = await response.json(); // Convert response to JSON
    //     console.log(data.followers); // Print followers count
    //   } catch (error) {
    //     console.error("Error:", error); // Handle errors
    //   }
    // }

    // fetchData();

    const URL = "https://api.github.com/users/hiteshchoudhary";
    const bio = document.querySelector("#bio");
    const btn = document.querySelector("#getBio");
    
    
    

    const getFacts = async () => {
      console.log("Getting data...");

      let response = await fetch(URL); //response is object and one more thing this is get request we are getting request from api
      console.log(response); //json format mai rehta
      // console.log(response.status); //200
      let data = await response.json();
     bio.innerText = data.bio;
      
      
    };
    // getFacts(); //print this thing in console you will get to know fetch takes some time and this prints the result
    btn.addEventListener('click',getFacts);
  </script>
  script
</html>
